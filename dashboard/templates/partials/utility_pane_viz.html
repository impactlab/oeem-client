{% load humanize %}
<div class="container-fluid energy-summary">
	<div class="row-fluid">
    {% if savings_data.total_annual_usage %}
    <div class="col-sm-5">
      <h4>Quick Stats - {{savings_data.energy_type}}</h4>

      <div class="col-xs-6">
        <h6 class="no-pad-bottom">
          Annual Usage
          <span class="muted">{{savings_data.unit}}/yr</span>
        </h6>
        <div id="usage-bar-{{savings_data.energy_type_slug}}">
        </div>
        <script type="text/javascript">

          $(document).ready(function () {

            BarHelper.create('usage-bar-{{savings_data.energy_type_slug}}', {{ savings_data.total_annual_usage.baseline }}, {{savings_data.total_annual_usage.reporting}})
          });

        </script>
      </div>

      <div class="col-xs-6">
        <h6 class="no-pad-bottom">
          Annual Savings
          <span class="muted">{{savings_data.unit}}/yr</span>
        </h6>
        <h2 id="total-annual-savings">
          {{ savings_data.total_annual_savings | floatformat:"0" | intcomma }}
          {% if savings_data.total_annual_usage.percent_savings >= 0 %}
            <span class="badge-pct badge-success">{{savings_data.total_annual_usage.percent_savings}}%</span>
          {% else %}
            <span class="badge-pct badge-danger">{{savings_data.total_annual_usage.percent_savings}}%</span>
          {% endif %}
        </h2>
      </div>

    </div>
    <div class="col-sm-7">
    {% else %}
    <div class="col-sm-12">
    {% endif %}

      <div id="{{ savings_data.energy_type_slug }}-gross-savings">
      </div>

    </div>
  </div>

  <script type="text/javascript">

  {% if savings_data.usage_data %}
    $(document).ready(function () {
      var usage_data = {{ savings_data.usage_data | safe }}

      SavingsTimeseriesHelper.create(
        '{{ savings_data.energy_type_slug }}-gross-savings',
        '{{ savings_data.energy_type }} Monthly Gross Savings',
        '{{ savings_data.unit }}',
        usage_data['xlabels'][usage_data['actual_start_idx']],
        usage_data['actual_start_idx'],
        usage_data['series_baseline'],
        usage_data['series_actual'],
        usage_data['series_n_projects']);
      });
  {% endif %}

  </script>
</div>


<div class="divider"></div>

<div class="container-fluid">
	<div class="row-fluid">

    {% if savings_data.gross_savings_hist_data %}
    <div class="col-sm-6">
      <div id="{{ savings_data.energy_type_slug }}-gross-savings-histogram">
      	Histogram
      </div>
    </div>

    <script type="text/javascript">

        $(document).ready(function () {

          var hist_data = {{ savings_data.gross_savings_hist_data | safe }}

          HistHelper.create("{{ savings_data.energy_type_slug }}-gross-savings-histogram",
            "Project Savings - Gross",
            "Number of Projects",
            "Gross Project Savings ({{ savings_data.unit }})",
            hist_data.xlabels,
            [hist_data.dataseries]
          );

      });

    </script>
    {% endif %}

    {% if savings_data.annual_savings_hist_data %}
    <div class="col-sm-6">
      <div id="{{ savings_data.energy_type_slug }}-annual-savings-histogram">
      	Histogram
      </div>
    </div>

    <script type="text/javascript">

        $(document).ready(function () {

          var hist_data = {{ savings_data.annual_savings_hist_data | safe }}

          HistHelper.create("{{ savings_data.energy_type_slug }}-annual-savings-histogram",
            "Project Savings - Annual",
            "Number of Projects",
            "Annualized Project Savings ({{ savings_data.unit }})",
            hist_data.xlabels,
            [hist_data.dataseries]
          );

      });

    </script>
    {% endif %}

  </div>


</div>


<div class="container">
  <div class="row-fluid">
    <div class="col-sm-12">
      {% include 'partials/meter_runs.html' %}
    </div>
  </div>
</div>



<div class="container">

  <div class="row-fluid">
    <div class="col-sm-12">
      <div class="divider"></div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-sm-6">
      <div id="elec_savings_scatter" class="chart"></div>
    </div>
    <div class="col-sm-6">
      <div id="gas_savings_scatter" class="chart"></div>
    </div>
  </div>

  <div class="row-fluid">
    <div class="col-sm-12">
      <div class="divider"></div>
    </div>
  </div>

  <div class="row-fluid">
    <div class="col-sm-6">
      <div id="elec_rr_hist" class="chart"></div>
    </div>
    <div class="col-sm-6">
      <div id="gas_rr_hist" class="chart"></div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-sm-12">
      <div class="divider"></div>
    </div>
  </div>
</div>
