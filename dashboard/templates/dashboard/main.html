{% extends 'dashboard/base.html' %}

{% load staticfiles %}

{% block title %}Dashboard{% endblock %}

{% block content %}


{% block navbar %}
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand logo" href="{% url 'dashboard:main' %}">
        <img alt="OEE" src="{% static logo %}">
      </a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        {% if user.is_staff %}
        <li><a href="{% url 'admin:index' %}">Admin</a></li>
        {% endif %}
        <li><a href="{% url 'logout' %}">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>
{% endblock navbar %}

{% block container %}
<div id="dashboard"></div>
{% endblock container %}

{% endblock content %}

{% block extrajs %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.0.1/spin.min.js'></script>
<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
<script src="{% static 'dashboard/js/build/main.js' %}"></script>

<script type="text/javascript">

ReactDOM.render(
  React.createElement( DashboardBox, {
    project_block_list_url: "{{ project_block_list_url }}",
    project_list_url: "{{ project_list_url }}",
    meter_run_list_url: "{{ meter_run_list_url }}",
    project_attribute_key_list_url: "{{ project_attribute_key_list_url }}",
    project_attribute_list_url: "{{ project_attribute_list_url }}",
    consumption_metadata_list_url: "{{ consumption_metadata_list_url }}",
    csrf_token: "{{ csrf_token }}",
  }),
  document.getElementById('dashboard')
);

</script>

{% endblock extrajs %}

